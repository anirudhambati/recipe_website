<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Form</title>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.4/css/mdb.min.css" rel="stylesheet">
  
    <style>
	.txt{
	color:#37703D;
	}
	.text-heading{
		margin-top:50px;
		margin-bottom:30px;
		color:#37703D;
		font-family: 'MetropolisMedium'; 
		font-weight: normal; 
		font-style: normal; 
	}

	.text-heading:after{
		content:"";
		display:block;
		width:200px;
		height:5px;
		background-color:#FED650;
		margin: 5px auto;
		border-radius:5px;
	}
	
	.input-title{
		width:90%;
		background-color: white; /* Green */
		border: 2px solid #37703D;
		color:#37703D;
		padding: 10px 35px;
		font-size: 17px;
		margin: 4px 2px;
		border-radius: 30px;
	}

	.input-title::placeholder{
		opacity:0.7;
	}

	.txt-title{
		margin-top:50px;
		margin-bottom:30px;
		color:#37703D;
		font-family: 'MetropolisMedium'; 
		font-weight: normal; 
		font-style: normal; 
	}
	
	.txt-title:after{
		content:"";
		display:block;
		width:165px;
		height:5px;
		background-color:#FED650;
		margin: 5px 0px;
		border-radius:5px;
	}

	.txt-block{
		background-color: white; /* Green */
		border: 2px solid #37703D;
		color:#37703D;
		padding: 10px 35px;
		font-size: 17px;
		margin: 4px 2px;
		border-radius: 30px;
	}
	.form-ing-search{
		position:absolute;
		width:100%;
		height:100%;
		background:url('lily.jpg');
		background-repeat:no-repeat;
		background-size:cover;
		filter:blur(2px);
	}

			
			#myInput {
				background-image: url('/css/searchicon.png');
				background-position: 10px 12px;
				background-repeat: no-repeat;
				width: 100%;
				font-size: 16px;
				padding: 12px 20px 12px 40px;
				border: 1px solid #ddd;
				margin-bottom: 12px;
				
			}
			
			#myUL {
				list-style-type: none;
				padding: 0;
				margin: 0;
				position: absolute;
				background-color: white;
				z-index: 2;
				width: 80%;
			}
			
			#myUL li a {
				border: 1px solid white;
				margin-top: -1px; /* Prevent double borders */
				background-color: #f6f6f6;
				padding: 5px;
				text-decoration: none;
				font-size: 18px;
				color: black;
				display: block;
			}
			
			#myUL li a:hover:not(.header) {
				background-color: #eee;
			}
			</style>
</head>

<body >
	
	<div class="form-ing-search"></div>
	<div class="container">
	
	<div class="row">
	<div class="col mx-auto my-4">
	<section>
	<div class="container z-depth-3 my-3 p-5 text-center bg-white" >
		<div class="row">
			<div class="col">
				<h2 class="text-center text-heading" style="margin-top:20px"> Search Recipe by Ingredients</h2>
				
				
				<div class="row">
					<div class="col col-lg-9 m-auto">
						<div class="row">
							<div class="col">
								<input type="text" class="input-title " placeholder="Search for Ingredients" id="myInput" onkeyup="myFunction()" >
							</div>
								
							
							<div class="col-lg-1 m-auto">
								<button id="add" class="add-item" >Add</button>
							</div>
						</div>
						<ul id="myUL">
								{%for item in names%}
								<li style='display: none'  ><a href="#" id="{{item.id}}" onclick="update({{item.id}})">{{item.value}}</a></li>
								{%endfor%}
						</ul>
					</div>
				</div>			
				<form method="post" enctype="multipart/form-data" action="/uploadform/insert1/">
				{% csrf_token %}
				<div class="row mb-5">
					<div class="col col-lg-8 mx-auto">
						<div class="row">
							<div class="col">
								<h3 class="text-left txt-title">Included Ingredients :</h3>
							</div>
						</div>
						<div class="row" id="items">							
						</div>
					</div>
				</div>
					<input type="submit" value="Search" >
				</form>
				
			</div>
		</div>
	</div>
	</section>
	
	</div>
	</div>
	</div>
	

	<!-- add recipe ends here -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<!-- Bootstrap tooltips -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
	<!-- Bootstrap core JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<!-- MDB core JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.4/js/mdb.min.js"></script>

	<script>
		function addItem() {
		  var itemval = $("#myInput").val();
		  var input = '';
		  if(itemval != ''){
			addblock(itemval);
		  }
		 $("#myInput").val("");
		 
		}
		function addblock(itemval){
			var block ="<input type='text' name='ingredient' value='"+itemval+"' class='txt-block col col-lg-3' >";
		  $("#items").append(block);
			var input, filter, ul, li, a, i, txtValue;
				input = document.getElementById('myInput');

				filter = input.value.toUpperCase();
				ul = document.getElementById("myUL");
				li = ul.getElementsByTagName('li');
				
				for (i = 0; i < li.length; i++) {
					li[i].style.display = "none";
				}
		}

		function deleteItem(e, item) {
		  e.preventDefault();
		  $(item).parent().parent().fadeOut('slow', function() { 
			$(item).parent().parent().remove();
		  });
		}

		$(function() {
		 
		   $("#add").on('click', function(e){
			 e.preventDefault();
			 addItem();
			});
		  
			$("#items").on('click', '.delete', function(e){
				var item = this; 
				deleteItem(e, item)
			});
			
			$("#all-ing").on('click', '.sugg-ing', function(e){
				var item = this;
				var itemval = $(this).text();
				console.log(itemval);
				e.preventDefault();
				$(item).fadeOut('slow', function() { 
					$(item).remove();
				});
				if(itemval != ''){
					addblock(itemval);
				}
			});
			$("#add-s").on('click',function(){
				var val =$("#step-desc").val();
				if(val != ''){
					$(".step-list").append("<li><input type='text' name='Steps' value = '"+val+"'><button id='del-step' onclick='$(this).parent().remove();'>Delete</button></li>")
				}
				$("#step-desc").val("");
			});
			$("#del-step").on('click',function(){
				var item = this;
				$(item).remove();
				console.log("delete");
			});
		});
			
		
	</script>
	<script>
			function myFunction() {
				var input, filter, ul, li, a, i, txtValue;
				input = document.getElementById('myInput');

				filter = input.value.toUpperCase();
				ul = document.getElementById("myUL");
				li = ul.getElementsByTagName('li');
				for (i = 0; i < li.length; i++) {
					a = li[i].getElementsByTagName("a")[0];
					txtValue = a.textContent || a.innerText;
					if (txtValue.toUpperCase().indexOf(filter) > -1) {
						li[i].style.display = "";
					} else {
						li[i].style.display = "none";
					}
				}
			if(input.value == ""){
				for (i = 0; i < li.length; i++) {
					li[i].style.display = "none";
				}
			}
			}
			function update(i){
					var block = document.getElementById(i);
					var inputVal=document.getElementById("myInput");
					var val = block.innerHTML;
					inputVal.value = val;
			}
			</script>

</body>
</html>